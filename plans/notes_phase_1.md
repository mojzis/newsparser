please ditch black, ruff should be enough
also can we try to use ty for type checking ? its part of ruff, see https://github.com/astral-sh/ty for details